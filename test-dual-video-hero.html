<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dual-Video Hero Section Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles to match the original implementation */
        .hero-section {
            position: relative;
            height: 100vh;
            width: 100%;
            overflow: hidden;
        }
        
        .video-desktop {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-mobile {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        @media (min-width: 768px) {
            .video-desktop {
                display: block;
            }
            .video-mobile {
                display: none;
            }
        }
        
        @media (max-width: 767px) {
            .video-desktop {
                display: none;
            }
            .video-mobile {
                display: block;
            }
        }
        
        .test-controls {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 9999;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            max-width: 300px;
        }
        
        .test-results {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 9999;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 11px;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            display: none;
        }
        
        .status-passed { color: #10b981; }
        .status-warning { color: #f59e0b; }
        .status-error { color: #ef4444; }
        
        .hero-content {
            position: relative;
            z-index: 20;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            color: white;
            padding: 1rem;
            text-align: center;
            padding-top: 5rem;
        }
        
        .promotional-text {
            position: absolute;
            bottom: 2rem;
            left: 0;
            right: 0;
            text-align: center;
            z-index: 20;
        }
    </style>
</head>
<body class="bg-gray-900">
    <!-- Test Controls -->
    <div class="test-controls">
        <h3>üß™ Dual-Video Test Controls</h3>
        <button onclick="runTests()" style="margin: 5px; padding: 5px 10px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Run All Tests
        </button>
        <button onclick="clearResults()" style="margin: 5px; padding: 5px 10px; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Clear Results
        </button>
        <button onclick="toggleResults()" style="margin: 5px; padding: 5px 10px; background: #6b7280; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Toggle Results
        </button>
        <div style="margin-top: 10px;">
            <strong>Viewport:</strong> <span id="viewport-size"></span>
        </div>
        <div>
            <strong>Status:</strong> <span id="test-status">Ready</span>
        </div>
    </div>

    <!-- Test Results Display -->
    <div id="test-results" class="test-results">
        <h3>üìä Test Results</h3>
        <div id="results-content"></div>
    </div>

    <!-- Hero Section with Dual Videos -->
    <section class="hero-section">
        <!-- Desktop Hero Video - Only visible on desktop -->
        <video
            class="video-desktop hidden md:block"
            autoPlay
            muted
            loop
            playsInline
            preload="none"
        >
            <source src="https://res.cloudinary.com/dmdjagtkx/video/upload/v1759408577/4fdd1c67-f89a-4766-964a-7ee2101630be_vfur0q.mp4" type="video/mp4" media="(min-width: 768px)" />
        </video>
        
        <!-- Mobile Hero Video - Only visible on mobile -->
        <video
            class="video-mobile md:hidden"
            autoPlay
            muted
            loop
            playsInline
            preload="none"
        >
            <source src="https://res.cloudinary.com/dmdjagtkx/video/upload/v1758689443/social_defipullen_httpss.mj.run4owL1ng-Xks_website_lighting_hero_--a_5d363600-c6ef-4ebc-bd63-71ebde3c4da7_2_ptz2ph.mp4" type="video/mp4" media="(max-width: 767px)" />
        </video>
        
        <!-- Hero Content -->
        <div class="hero-content">
            <div class="flex-1"></div>
            
            <!-- Scroll Down Indicator -->
            <div class="animate-bounce mb-28">
                <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    className="h-8 w-8" 
                    fill="none" 
                    viewBox="0 0 24 24" 
                    stroke="currentColor"
                >
                    <path 
                        strokeLinecap="round" 
                        strokeLinejoin="round" 
                        strokeWidth={2} 
                        d="M19 14l-7 7m0 0l-7-7m7 7V3" 
                    />
                </svg>
            </div>
        </div>
        
        <!-- Promotional Text -->
        <div class="promotional-text">
            <div class="bg-red-600 text-white font-bold py-2 px-6 rounded-full mx-auto inline-block animate-pulse shadow-lg border-2 border-white">
                <span class="text-lg">üéâ 20% OFF FIRST PURCHASE üéâ</span>
            </div>
        </div>
    </section>

    <!-- Additional content for scrolling -->
    <section class="py-20 bg-gray-800 text-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-6">Test Page Content</h2>
            <p class="text-center text-gray-300 mb-12">
                This is a test page to verify the dual-video hero section functionality.
                The videos should switch based on viewport size.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
                <div class="bg-gray-700 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold mb-3">Desktop Video</h3>
                    <p class="text-gray-300">Should be visible on screens ‚â•768px</p>
                    <p class="text-sm text-gray-400 mt-2">URL: https://res.cloudinary.com/dmdjagtkx/video/upload/v1759408577/4fdd1c67-f89a-4766-964a-7ee2101630be_vfur0q.mp4</p>
                </div>
                
                <div class="bg-gray-700 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold mb-3">Mobile Video</h3>
                    <p class="text-gray-300">Should be visible on screens ‚â§767px</p>
                    <p class="text-sm text-gray-400 mt-2">URL: https://res.cloudinary.com/dmdjagtkx/video/upload/v1758689443/social_defipullen_httpss.mj.run4owL1ng-Xks_website_lighting_hero_--a_5d363600-c6ef-4ebc-bd63-71ebde3c4da7_2_ptz2ph.mp4</p>
                </div>
                
                <div class="bg-gray-700 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold mb-3">Test Features</h3>
                    <ul class="text-gray-300 text-sm space-y-1">
                        <li>‚úÖ Responsive switching</li>
                        <li>‚úÖ Video attributes</li>
                        <li>‚úÖ Network monitoring</li>
                        <li>‚úÖ Console error tracking</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Load the testing script -->
    <script src="test-dual-video-hero.js"></script>
    
    <script>
        // Update viewport size display
        function updateViewportSize() {
            document.getElementById('viewport-size').textContent = `${window.innerWidth}x${window.innerHeight}`;
        }
        
        window.addEventListener('resize', updateViewportSize);
        updateViewportSize();
        
        // Test control functions
        async function runTests() {
            document.getElementById('test-status').textContent = 'Running...';
            document.getElementById('test-status').className = 'status-warning';
            
            try {
                const results = await window.dualVideoTester.runAllTests();
                displayResults(results);
                
                const status = results.summary.overallStatus;
                document.getElementById('test-status').textContent = status.toUpperCase();
                document.getElementById('test-status').className = `status-${status.toLowerCase()}`;
                
                console.log('üìä Test Results:', results);
                
            } catch (error) {
                console.error('‚ùå Test execution failed:', error);
                document.getElementById('test-status').textContent = 'ERROR';
                document.getElementById('test-status').className = 'status-error';
            }
        }
        
        function displayResults(results) {
            const resultsContent = document.getElementById('results-content');
            
            let html = `
                <div class="mb-4">
                    <strong>Overall Status:</strong> 
                    <span class="status-${results.summary.overallStatus.toLowerCase()}">${results.summary.overallStatus}</span>
                </div>
                <div class="mb-4">
                    <strong>Test Time:</strong> ${results.summary.totalTestTime.toFixed(2)}ms
                </div>
                <div class="mb-4">
                    <strong>Timestamp:</strong> ${new Date(results.summary.timestamp).toLocaleString()}
                </div>
            `;
            
            // Desktop video results
            if (results.desktopVideo) {
                html += `
                    <div class="mb-4">
                        <h4>üñ•Ô∏è Desktop Video:</h4>
                        <div>Found: ${results.desktopVideo.found ? '‚úÖ' : '‚ùå'}</div>
                        ${results.desktopVideo.source ? `
                            <div>Source: ${results.desktopVideo.source.src}</div>
                            <div>Network State: ${results.desktopVideo.networkState}</div>
                            <div>Ready State: ${results.desktopVideo.readyState}</div>
                            <div>Dimensions: ${results.desktopVideo.dimensions.offsetWidth}x${results.desktopVideo.dimensions.offsetHeight}</div>
                        ` : ''}
                        ${results.desktopVideo.error ? `<div class="status-error">Error: ${results.desktopVideo.error}</div>` : ''}
                    </div>
                `;
            }
            
            // Mobile video results
            if (results.mobileVideo) {
                html += `
                    <div class="mb-4">
                        <h4>üì± Mobile Video:</h4>
                        <div>Found: ${results.mobileVideo.found ? '‚úÖ' : '‚ùå'}</div>
                        ${results.mobileVideo.source ? `
                            <div>Source: ${results.mobileVideo.source.src}</div>
                            <div>Network State: ${results.mobileVideo.networkState}</div>
                            <div>Ready State: ${results.mobileVideo.readyState}</div>
                            <div>Dimensions: ${results.mobileVideo.dimensions.offsetWidth}x${results.mobileVideo.dimensions.offsetHeight}</div>
                        ` : ''}
                        ${results.mobileVideo.error ? `<div class="status-error">Error: ${results.mobileVideo.error}</div>` : ''}
                    </div>
                `;
            }
            
            // Responsive behavior results
            if (results.responsiveBehavior && results.responsiveBehavior.tests) {
                html += `
                    <div class="mb-4">
                        <h4>üìê Responsive Behavior:</h4>
                        ${results.responsiveBehavior.tests.map(test => `
                            <div class="mb-2">
                                <strong>${test.viewportSize.name} (${test.viewportSize.width}px):</strong>
                                ${test.testPassed ? '‚úÖ' : '‚ùå'} 
                                Expected: ${test.expectedVideo}, Actual: ${test.actualVideo}
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Video attributes results
            if (results.videoAttributes) {
                html += `
                    <div class="mb-4">
                        <h4>‚öôÔ∏è Video Attributes:</h4>
                        <div>All Required Present: ${results.videoAttributes.allTestsPassed ? '‚úÖ' : '‚ùå'}</div>
                        ${results.videoAttributes.tests.map(test => `
                            <div class="mb-2">
                                <strong>${test.type} Video:</strong>
                                ${test.allRequiredPresent ? '‚úÖ' : '‚ùå'} All attributes present
                                ${test.preloadCorrect ? '‚úÖ' : '‚ùå'} Preload="none"
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Console errors
            if (results.consoleErrors && results.consoleErrors.length > 0) {
                html += `
                    <div class="mb-4">
                        <h4 class="status-error">‚ö†Ô∏è Console Errors (${results.consoleErrors.length}):</h4>
                        ${results.consoleErrors.map(error => `
                            <div class="mb-1 text-xs">
                                <span class="status-${error.type}">[${error.type.toUpperCase()}]</span> ${error.message}
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Network requests
            if (results.networkRequests && results.networkRequests.length > 0) {
                html += `
                    <div class="mb-4">
                        <h4>üåê Network Requests:</h4>
                        ${results.networkRequests.map(req => `
                            <div class="mb-1 text-xs">
                                ${req.success ? '‚úÖ' : '‚ùå'} ${req.url.substring(0, 50)}... 
                                (${req.loadTime.toFixed(2)}ms)
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            resultsContent.innerHTML = html;
        }
        
        function clearResults() {
            document.getElementById('results-content').innerHTML = '';
            document.getElementById('test-status').textContent = 'Ready';
            document.getElementById('test-status').className = '';
        }
        
        function toggleResults() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.style.display = resultsDiv.style.display === 'none' ? 'block' : 'none';
        }
        
        // Auto-run tests after page loads
        window.addEventListener('load', () => {
            console.log('üé¨ Test page loaded, ready to run dual-video tests');
            setTimeout(() => {
                console.log('üöÄ Auto-running tests...');
                runTests();
            }, 3000); // Wait 3 seconds for videos to potentially load
        });
    </script>
</body>
</html>